(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={1868:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>I,default:()=>q,getServerSideProps:()=>_,getStaticPaths:()=>k,getStaticProps:()=>C,reportWebVitals:()=>O,routeModule:()=>B,unstable_getServerProps:()=>A,unstable_getServerSideProps:()=>E,unstable_getStaticParams:()=>L,unstable_getStaticPaths:()=>J,unstable_getStaticProps:()=>R});var r={};t.r(r),t.d(r,{default:()=>P,getServerSideProps:()=>S});var i=t(7093),a=t(5244),n=t(1323),l=t(1777),c=t.n(l),u=t(5143),d=t(997),o=t(3227),x=t(1649),m=t(1163),f=t(8633);function h({title:e,userName:s,articleId:t,like:r,user:i}){let a=(0,m.useRouter)();return d.jsx("div",{className:"flex-col flex bg-primary-100 border m-2 rounded-md p-2",onClick:()=>{a.push({pathname:`/article/${t}`,query:{articleId:t,userId:i.id}})},children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"text-xl",children:e}),(0,d.jsxs)("div",{className:"flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[d.jsx(f.sF8,{}),r]}),d.jsx("div",{className:"text-xs",children:s})]})]})})}var p=t(1717),g=t(9714),j=t(8944);function v({user:e,notification:s,allArticle:t}){return d.jsx(g.O,{header:d.jsx(p.h,{notification:s,user:e}),leftBar:d.jsx(j.K,{}),main:t.map(s=>d.jsx(h,{articleId:s.id,content:s.content,like:s.like,title:s.title,user:e,userName:s.userName},s.id)),rightBar:d.jsx("div",{className:"bg-gray-50 w-full h-full",children:"広告とか貼れそう"})})}var w=t(589),N=t(1686),y=t(606),b=t(1583);let S=async e=>{let s=await (0,o.getServerSession)(e.req,e.res,b.L);if(!s)return{redirect:{destination:"/api/auth/signin",permanent:!1}};{let e=JSON.parse(JSON.stringify(await (0,y.t)(s.user.uid)));if(!e)return{redirect:{destination:"/api/auth/signin",permanent:!1}};{let s=JSON.parse(JSON.stringify(await (0,w.gA)(e.id))),t=JSON.parse(JSON.stringify(await (0,N.H)(e.id)));return{props:{user:e,article:s,notification:t,allArticle:JSON.parse(JSON.stringify(await (0,w.L$)()))}}}}},P=function({user:e,notification:s,article:t,allArticle:r}){let{status:i}=(0,x.useSession)();return d.jsx(d.Fragment,{children:"loading"===i?null:d.jsx(v,{allArticle:r,article:t,notification:s,user:e})})},q=(0,n.l)(r,"default"),C=(0,n.l)(r,"getStaticProps"),k=(0,n.l)(r,"getStaticPaths"),_=(0,n.l)(r,"getServerSideProps"),I=(0,n.l)(r,"config"),O=(0,n.l)(r,"reportWebVitals"),R=(0,n.l)(r,"unstable_getStaticProps"),J=(0,n.l)(r,"unstable_getStaticPaths"),L=(0,n.l)(r,"unstable_getStaticParams"),A=(0,n.l)(r,"unstable_getServerProps"),E=(0,n.l)(r,"unstable_getServerSideProps"),B=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:u.default,Document:c()},userland:r})},3419:(e,s,t)=>{"use strict";t.d(s,{U:()=>i});var r=t(997);function i({type:e,placeholder:s,value:t,onChange:i,height:a}){return r.jsx("input",{className:" m-1 rounded-md p-2 border",onChange:e=>i(e.target.value),placeholder:s,style:{height:a||"50px",width:"300px"},type:e,value:t})}},9705:(e,s,t)=>{"use strict";t.d(s,{B:()=>l});var r=t(997),i=t(5675),a=t.n(i),n=t(1163);function l({imageUrl:e,name:s,userId:t}){let i=(0,n.useRouter)();return r.jsx("div",{className:"flex flex-row items-center gap-1",children:r.jsx(a(),{alt:s,height:32,onClick:()=>{i.push({pathname:`/${t}`})},src:e,style:{borderRadius:"50%"},width:32})})}},1717:(e,s,t)=>{"use strict";t.d(s,{h:()=>f});var r=t(997),i=t(5675),a=t.n(i),n=t(1163);function l({id:e}){let s=(0,n.useRouter)();return r.jsx(r.Fragment,{children:r.jsx("button",{onClick:()=>void s.push({pathname:"/article/new",query:{userId:e}}),children:r.jsx(a(),{alt:"pen",height:"32",src:"/icon/pen.svg",width:"32"})})})}function c(){let e=(0,n.useRouter)(),s=()=>{e.push("/")};return(0,r.jsxs)("div",{className:"flex items-center p-1",onClick:()=>{s()},children:[r.jsx(a(),{alt:"logo",height:40,src:"/images/logo.png",style:{borderRadius:"50%"},width:40}),r.jsx("div",{className:"text-2xl font-bold items-center",children:"キジノニワ"})]})}function u({title:e,description:s,image:t}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(a(),{alt:e,height:40,src:t,width:16}),r.jsx("h2",{children:e}),r.jsx("p",{children:s})]})}function d({notifications:e}){return r.jsx("button",{className:"menu-item",children:e.map(e=>r.jsx(u,{description:e.description,image:e.image,title:e.title},e.id))})}t(6689);var o=t(9705),x=t(3419);function m(){return r.jsx("div",{className:"flex flex-row  justify-center items-center",children:r.jsx(x.U,{height:"32px",onChange:()=>console.log("search"),placeholder:"Search Article",type:"",value:""})})}function f({user:e,notification:s}){return r.jsx("header",{className:"flex justify-between items-center bg-primary-100",children:r.jsx("div",{className:"sticky top-0 flex-1",children:(0,r.jsxs)("div",{className:"flex justify-center w-full gap-1 m-2  bg-fixed",children:[r.jsx("div",{className:"flex w-1/4 justify-start ",children:r.jsx(c,{})}),r.jsx("div",{className:"flex w-1/2 justify-center ",children:r.jsx(m,{})}),(0,r.jsxs)("div",{className:"flex w-1/4 justify-end flex-row mr-4 gap-3",children:[r.jsx(d,{notifications:s}),r.jsx(o.B,{imageUrl:e.image,name:e.name,userId:e.id}),r.jsx(l,{id:e.id})]})]})})})}},9714:(e,s,t)=>{"use strict";t.d(s,{O:()=>i});var r=t(997);function i({header:e,rightBar:s,leftBar:t,main:i}){return r.jsx("div",{className:"flex h-screen ",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden  ",children:[e,(0,r.jsxs)("div",{className:"flex h-full ",children:[r.jsx("div",{className:" bg-gray-50 w-1/5",children:t}),r.jsx("main",{className:"flex flex-col w-full bg-white overflow-x-hidden overflow-y-auto mb-14 ",children:i}),r.jsx("nav",{className:"flex  h-full bg-gray-50 w-1/5",children:r.jsx("div",{className:"w-full flex mx-auto ",children:s})})]})]})})}t(6689)},8944:(e,s,t)=>{"use strict";t.d(s,{K:()=>c,Z:()=>u});var r=t(997),i=t(6689),a=t(1163);function n({title:e,icon:s,route:t}){let i=(0,a.useRouter)(),n=()=>{i.push(t)};return(0,r.jsxs)("div",{className:"flex items-center cursor-pointer bg-primary-100 border-l-4 border-transparent hover:border-primary-500 p-2 w-full h-12 m-1",onClick:()=>{n()},children:[s,r.jsx("text",{fontSize:"16px",children:e})]})}function l({title:e,sideBarItems:s}){let[t,a]=(0,i.useState)(!1);return(0,r.jsxs)("li",{className:"opcion-con-desplegable",children:[r.jsx("div",{className:"flex items-center p-2 ",onClick:()=>{a(!t)},children:r.jsx("span",{children:e})}),r.jsx("ul",{className:`desplegable ml-4 ${t?"":"hidden"}`,children:s.map(e=>r.jsx(n,{icon:e.icon,route:e.route,title:e.title},e.title))})]})}function c(){return r.jsx("nav",{className:"w-full flex mx-auto px-2 py-3",children:r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-900 text-xl ",children:r.jsx("aside",{className:"bg-gray-800 text-white w-50 min-h-screen p-1",children:r.jsx("nav",{children:(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx(l,{sideBarItems:[{title:"ホーム",icon:r.jsx("i",{className:"fas fa-home"}),route:"/"},{title:"ユーザー",icon:r.jsx("i",{className:"fas fa-users"}),route:"/"}],title:"メイン"}),r.jsx(l,{sideBarItems:[{title:"アカウント設定",icon:r.jsx("i",{className:"fas fa-user"}),route:"/"},{title:"プロフィール",icon:r.jsx("i",{className:"fas fa-user"}),route:"/"},{title:"設定",icon:r.jsx("i",{className:"fas fa-cog"}),route:"/"},{title:"ログアウト",icon:r.jsx("i",{className:"fas fa-sign-out-alt"}),route:"/signin"}],title:"設定"})]})})})})})}let u=c},5143:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(997);t(108);var i=t(1649);function a({Component:e,pageProps:{session:s,...t}}){return r.jsx(i.SessionProvider,{session:s,children:r.jsx(e,{...t})})}},1583:(e,s,t)=>{"use strict";t.d(s,{L:()=>u});var r=t(3524),i=t(3227),a=t.n(i);let n=require("next-auth/providers/google");var l=t.n(n);let c=new r.PrismaClient,u={providers:[l()({clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||""})],callbacks:{async signIn(e){let{email:s}=e.user;return await c.user.upsert({where:{email:s},update:{},create:{name:e.user.name,email:e.user.email,image:e.user.image,admin:!1}}),!0},session:async({session:e,token:s})=>(e.accessToken=s.accessToken,e.user.id=s.id,e.user.uid=s.uid,e),async jwt({token:e,user:s}){if(s){let t=await c.user.findUnique({where:{email:s.email}});e.uid=t?.id,e.accessToken=s.access_token}return e}}};a()(u)},589:(e,s,t)=>{"use strict";t.d(s,{L$:()=>n,gA:()=>i,wM:()=>a});var r=t(3524);async function i(e){return new r.PrismaClient().article.findMany({where:{userId:e}})}async function a(e){return new r.PrismaClient().article.findUnique({where:{id:e}})}async function n(){return new r.PrismaClient().article.findMany()}},1686:(e,s,t)=>{"use strict";t.d(s,{H:()=>i});var r=t(3524);async function i(e){return new r.PrismaClient().notification.findMany({where:{userId:e}})}},606:(e,s,t)=>{"use strict";t.d(s,{t:()=>i});var r=t(3524);async function i(e){return new r.PrismaClient().user.findUnique({where:{id:e}})}},108:()=>{},3524:e=>{"use strict";e.exports=require("@prisma/client")},3227:e=>{"use strict";e.exports=require("next-auth")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[777,342,675,633],()=>t(1868));module.exports=r})();